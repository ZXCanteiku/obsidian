## Секционирование пропорционально количеству узлов
aliases: 
	- "секционирование пропорционально количеству узлов"

---

### Секционирование пропорционально количеству узлов

При динамическом секционировании количество секций пропорционально размеру набора данных, поскольку размеры всех секций поддерживаются с помощью процессов разбиения и слияния в пределах фиксированных минимума и максимума. С другой стороны, при фиксированном количестве секций, размер каждой секции пропорционален размеру набора данных. В обоих случаях количество секций не зависит от количества узлов.  При третьем возможном варианте, используемом в СУБД [[Cassandra]] и [[Ketama]], количество секций пропорционально количеству узлов — другими словами, на каждый узел приходится фиксированное количество секций [23, 27, 28]. В этом случае размеры всех секций растут пропорционально размеру набора данных, если количество узлов остается неизменным, но при увеличении количества узлов секции снова уменьшаются. Поскольку больший объем данных обычно требует для хранения большего количества узлов, такой подход обеспечивает практически постоянные размеры отдельных секций. При добавлении в кластер новый узел случайным образом выбирает фиксированное количество существующих секций для разбиения, после чего забирает по одной половине каждой из разбиваемых секций, оставляя вторые половины на месте. Получаемые в результате разбиения могут оказаться неравными, но при усреднении по большому количеству секций (по умолчанию в СУБД Cassandra 256 секций на узел) новый узел забирает у других узлов равную долю общей нагрузки. В Cassandra 3.0 появился другой алгоритм перебалансировки, позволяющий избежать неравных разбиений [29]. Выбор границ секций случайным образом требует использования хеш-секционирования (чтобы выбрать границы на основе диапазона чисел, возвращаемых хеш-функцией). Безусловно, такой подход лучше всего соответствует исходному определению согласованного хеширования [7] (см. врезку «Согласованное хеширование» в подразделе «Секционирование по хешу ключа» раздела 6.2). Новейшие хеш-функции позволяют достичь того же результата с меньшей избыточностью метаданных [8].

---
Tags: #highLoad #develop #sectioning
Author: [[]]
Related: [[Перебалансировка секций]]
URL: -- 