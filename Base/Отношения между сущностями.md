## Отношения между сущностями
aliases: 
	- "Отношения между сущностями"

- `Auto` - если мы выставляем тип ID, отличный от UUID (Long, Integer и т. д.) и используем стратегию генерации `AUTO`, то Hibernate (начиная с версии 5.0) сделает следующее:
	- Попробует использовать стратегию `SEQUENCE`.
	- Если БД не поддерживает последовательности (например, MySQL), то будет использоваться стратегия `TABLE` (или `IDENTITY`, в версии до 5.0).
- `IDENTITY` - используется встроенный в БД тип данных столбца -identity - для генерации значения первичного ключа.
- `SEQUENCE` - используется последовательность – специальный объект БД для генерации уникальных значений.
- `TABLE` - для генерации уникального значения используется отдельная таблица, которая эмулирует последовательность. Когда требуется новое значение, JPA провайдер блокирует строку таблицы, обновляет хранящееся там значение и возвращает его обратно в приложение. Эта стратегия – наихудшая по производительности и ее желательно избегать.

В первую очередь рассмотрите `SEQUENCE`. Эта стратегия обеспечивает самую высокую производительность в сравнении с остальными. Также нужно обратить внимание на следующее:
1. Хорошей практикой считается задание отдельной последовательности для каждой сущности. Нужно избегать использования значений по умолчанию в настройках.
2. Используйте `@SequenceGenerator` для тонкой настройки генерации значений ID и параметров генерируемой последовательности.
3. Шаг последовательности задавайте в соответствии с нагрузкой приложения.

Использование `IDENTITY` оправдано, если:
1. СУБД не поддерживает последовательности.
2. Создается небольшой объем данных.
3. В базу данных могут писать другие приложения.

---
Tags: #entity_id
Author: [[]]
Related: [[Entity]]
URL: [[]]