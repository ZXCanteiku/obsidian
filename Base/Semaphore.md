Semaphore

aliases: 
	- "Semaphore"

**Semaphore** – это новый тип синхронизатора: семафор со счётчиком, реализующий шаблон синхронизации Семафор. Доступ управляется с помощью счётчика: изначальное значение счётчика задаётся в конструкторе при создании синхронизатора, когда поток заходит в заданный блок кода, то значение счётчика уменьшается на единицу, когда поток его покидает, то увеличивается. Если значение счётчика равно нулю, то текущий поток блокируется, пока кто-нибудь не выйдет из защищаемого блока. Semaphore используется для защиты дорогих ресурсов, которые доступны в ограниченном количестве, например подключение к базе данных в пуле.

	Semaphore semaphore = new Semaphore(2);
	semaphore.acquire();
	try {
	    // Доступ к ограниченному ресурсу
	} finally {
	    semaphore.release();
	}

**Преимущества**:
- **Контроль за доступом к ресурсу**: Может ограничивать доступ к ресурсу, позволяя только определённое количество потоков (например, в пуле соединений или при работе с ресурсами, где параллелизм ограничен).
- **Гибкость управления**: `Semaphore` поддерживает "дружественные" потоки, которые могут ожидать завершения других потоков.
**Недостатки**:
- **Сложность в использовании**: Семантика управления доступом требует явного освобождения ресурсов (`release()`), что может привести к утечкам, если освобождение не будет выполнено.
- **Не поддерживает справедливость**: Стандартная реализация не гарантирует порядок потоков, что может привести к голоданию (starvation).

---
Tags: #thread #java #locks #semaphore
Author: [[]]
Related: [[Locks]]
URL: [[]]