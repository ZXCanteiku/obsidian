## Секционирование и вторичные индексы
aliases: 
	- "секционирование и вторичные индексы"

---

### Секционирование данных на основе модели «ключ — значение»

Секционирование данных на основе модели «ключ — значение» работает эффективно при запросах по первичному ключу, так как можно сразу узнать, в какой секции хранится запись. Однако применение вторичных индексов усложняет процесс, так как они используются для поиска по значениям атрибутов, например, «найти все красные автомобили». Вторичные индексы широко применяются в реляционных и документоориентированных БД. Проблема заключается в том, что их сложно однозначно привязать к секциям.

**Два основных подхода к секционированию вторичных индексов**:

1. **[[Секционирование по документам]]**: Каждая секция базы данных имеет свой локальный индекс. Например, база данных для продажи автомобилей может быть секционирована по ID документов, а для поиска по цвету и производителю добавляются вторичные индексы. Такой подход требует выполнения запросов ко всем секциям для поиска данных, что увеличивает затраты на чтение, но упрощает записи, так как каждая секция работает независимо.
    
2. **[[Секционирование по термам]]**: Глобальный индекс охватывает данные всех секций и секционируется по термам (например, по цвету автомобилей). Это уменьшает затраты на чтение, так как запрос можно выполнить к одной секции, содержащей нужный терм. Однако запись данных усложняется, поскольку она может затрагивать несколько секций.
    

**Проблемы глобальных индексов**: Обновление таких индексов может происходить асинхронно для избежания блокировок (например, в DynamoDB индексы обновляются за доли секунды, но возможны задержки при сбоях).

---
Tags: #highLoad #develop #sectioning
Author: [[]]
Related: [[Секционирование]]
URL: -- 