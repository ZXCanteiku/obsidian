
aliases: 
	- "Оптимизация java"
#### Оптимизация работы JVM
- **Используйте JIT-компиляцию (Just-In-Time):**
    - JVM скомпилирует часто исполняемый байт-код в машинный код для ускорения.
- **Настройка JVM-параметров:**
    - Укажите начальный и максимальный объем памяти для `heap`:
	        `-Xms512m -Xmx2048m`
    - Включите отслеживание сборки мусора:
	        `-XX:+UseG1GC`
    - Ускорьте процесс JIT-компиляции:
		`-XX:CompileThreshold=1000`
Это снизит порог частоты вызова метода, после которого JIT начнет оптимизацию.
- **Используйте профилирование и анализ:**
    - Применяйте инструменты, такие как JProfiler, VisualVM, или Flight Recorder для выявления узких мест.
- **Предзагрузка классов:**
	- Если ваше приложение использует много классов, настройте `-Xshare:on` для включения Class Data Sharing (CDS).
#### Overhead time
**Overhead time** — это дополнительное время, затрачиваемое на выполнение задач, не относящихся напрямую к логике программы. Это может быть время на компиляцию, сборку мусора, синхронизацию потоков и т.д.

**Способы уменьшение времени:**
- **Для Just-In-Time (JIT) компиляции**
	1. **Используйте серверный режим:**
	    - Убедитесь, что JVM запускается в серверном режиме (`-server`), так как это включает более агрессивные оптимизации.
	2. **Warm-up приложения:**
	    - Заранее прогрейте приложение, исполняя важные операции, чтобы часто используемые методы были оптимизированы JIT.
	3. **Профилируемая JIT-компиляция:**
	    - Включите профилирование JIT:
	        `-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation`
	4. **AOT-компиляция (Ahead-Of-Time):**
	    - Если приложение запускается часто, рассмотрите AOT-компиляцию с помощью GraalVM:        
	        `native-image -jar myapp.jar`
	        
 - **Для статической компиляции (Java-код → Байт-код)**
	1. **Многопоточная компиляция:**
	    - Используйте `javac` с опцией параллельной компиляции, если проект содержит много классов.
	2. **Инкрементальная компиляция:**
	    - Используйте инструменты сборки, такие как Maven или Gradle, которые выполняют компиляцию только измененных файлов.

#### Инструменты для анализа и ускорения:
- **JIT-трассировка:**
    - Используйте:
        `-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation`
        Это покажет, какие методы компилируются и оптимизируются JIT.
- **GC анализ:*
        `-Xlog:gc*`
- **Профилирование производительности:**
    - Инструменты:
        - JProfiler
        - VisualVM
        - Java Mission Control (JMC).


---
Tags: #optimization
Author: [[]]
Related: [[Java Core]]
URL: [[]]