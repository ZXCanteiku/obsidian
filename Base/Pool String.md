## Pool String

aliases: 
	- "Pool String"


**Пул строк** в Java — это механизм, который позволяет оптимизировать использование памяти и производительность при работе со строками. Он автоматически управляет хранением строковых литералов, чтобы минимизировать создание дублирующих объектов строк.

**Пул строк (или строковой пул)** — это специальная область памяти, которая хранит уникальные экземпляры строковых литералов. Когда вы создаете строку в Java, компилятор проверяет, существует ли уже такая строка в пуле. Если да, то он возвращает ссылку на уже существующий объект. Если нет, то создается новый объект, который помещается в пул.

### String
Начиная с Java 9 строки хранятся как массив байт:
	private final byte[] value;
	
Строки в Java являются immutable, т. е. неизменяемыми.  
Создать объект класса _String_ можно двумя способами: при помощи строкового литерала и конструктора.  
Первый способ, а он является рекомендуемым, удобен и прост. Под строковым литералом понимается последовательность символов, заключенных в двойные кавычки
String str1 = "TopJava"; String str2 = "Java"; String str3 = "Top" + str2; System.out.println("Строка 1 равна строке 3? " + (str1 == str3)); // false 
![[Pasted image 20241026163913.png]]
В java существует возможность вручную выполнить интегрирование строки в pool строк с помощью метода intern()

Начиная с Java 7, пул строк размещается в куче, на которую распространяется процесс сборки мусора. Преимуществом данного подхода является снижение вероятности появления ошибки OutOfMemoryError, так как строки, на которые не будет ссылаться ни одна переменная в выполняемой программе, будут удалены сборщиком мусора из пула, что приведет к освобождению памяти.

#### Преимущества

1. **Экономия памяти**:
    - Уменьшение количества создаваемых объектов строк для одинаковых значений.
2. **Быстрое сравнение строк**:
    - Использование оператора `==` для сравнения строк, которые хранятся в пуле, является более быстрым, чем использование метода `.equals()`, так как сравнение ссылок происходит быстрее.
3. **Упрощение работы со строками**:
    - Пул строк упрощает управление строками, позволяя избежать ненужного дублирования.

#### Недостатки

1. **Потенциальное использование памяти**:
    - Пул строк хранит строки в памяти на протяжении всего времени выполнения программы, что может привести к увеличению использования памяти, если в программе много уникальных строк.
2. **Непредсказуемость**:
    - Использование метода `intern()` может привести к неожиданному поведению, если не учитывать, что разные объекты могут указывать на одну и ту же строку в пуле.
---
Tags: #string #pool
Author: [[]]
Related: [[Java Core]]
URL: [[]]