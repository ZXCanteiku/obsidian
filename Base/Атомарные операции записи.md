## Атомарные операции записи
aliases: 
	- "атомарные операции записи"

---

### Атомарные операции записи
Во многих базах данных доступны атомарные операции записи, позволяющие избежать циклов чтения-изменения-записи в коде. Например, инструкция:

```sql
UPDATE counters SET value = value + 1 WHERE key = 'foo';
```

позволяет безопасно обновлять значение в конкурентных условиях. Документо-ориентированные базы, такие как MongoDB, также поддерживают локальные изменения в JSON-документах, а Redis позволяет модифицировать структуры данных, например, приоритетные очереди. Однако не все операции записи поддерживаются: например, изменения страниц Википедии, где возможно произвольное редактирование текста, требуют более сложной логики.

Обычно атомарные операции реализуются через эксклюзивную блокировку объектов при чтении, так что другие транзакции не могут их читать до завершения изменения. Альтернативный способ — выполнение атомарных операций в отдельном потоке. Однако при работе с ORM можно случайно внедрить небезопасные циклы чтения-изменения-записи вместо использования атомарных операций базы данных, что может стать источником ошибок.

---
Tags: #transactions #highLoad
Author: [[]]
Related: [[Предотвращение потери обновлений]]
URL: -- 