## Что такое векторы версий в БД
aliases: 
	- "Векторы версий"

---

### Описать заметку 

Пример на рисунке 1  использует одну реплику, где для отслеживания зависимостей между операциями достаточно одного номера версии. Но если реплик несколько и нет лидера, этого недостаточно. Нужно отслеживать номер версии для каждой реплики и ключа. Каждая реплика увеличивает свой номер версии при записи и следит за номерами версий других реплик. Это позволяет понять, какие значения перезаписать, а какие сохранить как сиблинги.

![[Pasted image 20241010212603.png]]

Эти номера версий объединяются в вектор версий. Вектор версий позволяет различать перезаписи и параллельные записи, когда данные отправляются между репликами и клиентами. Например, в [[Riak 2.0]] используется точечный вектор версий, что похоже на наш пример с корзиной.

Как и в примере с одной репликой, клиентам иногда нужно объединять сиблингов. Вектор версий помогает безопасно читать с одной реплики и записывать на другую, не теряя данные, пока сиблинги корректно объединяются.

Векторы версий часто путают с векторными часами, но для сравнения состояния реплик они лучше подходят.

---
Tags: #highLoad #develop #replication
Author: [[]]
Related: [[Обнаружение конкурентных операций записи]]
URL: -- 