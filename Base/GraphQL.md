## GraphQL
aliases: 
	- "GraphQL"

---
GraphQL — это язык запросов и среда выполнения для API, разработанная Facebook (Meta) как альтернатива REST. Он позволяет клиентам запрашивать только необходимые данные, что делает его мощнее и гибче, чем традиционные REST API.

### **Основные принципы GraphQL**
#### 1. **Гибкость запросов**
Клиент сам определяет, какие поля ему нужны. В отличие от REST, где один эндпоинт возвращает фиксированную структуру, в GraphQL клиент указывает, какие данные получать.
#### 2. **Один эндпоинт**
GraphQL API обычно доступен через **одну** конечную точку (например, `/graphql`), в отличие от REST, где разные ресурсы требуют разных эндпоинтов.
#### 3. **Операции в GraphQL**
GraphQL поддерживает три типа операций:
- **Query** – получение данных (аналог GET в REST)
- **Mutation** – изменение данных (аналог POST/PUT/DELETE)
- **Subscription** – потоковые обновления (реализуются через WebSocket)
#### 4. **Схема как контракт**
Сервер GraphQL описывает доступные данные через схему (`schema.graphqls`), определяя доступные запросы и типы данных.

### **Ключевые концепции**

#### 1. **Схема GraphQL**

Схема описывает, какие данные доступны. Например:
```graphQL
query {
    getUser(id: 1) {
        id
        name
    }
}
```
#### 2. **Типы данных в GraphQL**
GraphQL поддерживает следующие базовые типы:
- `Int` (целые числа)
- `Float` (числа с плавающей точкой)
- `String` (строки)
- `Boolean` (истина/ложь)
- `ID` (уникальный идентификатор)
Можно также создавать **кастомные типы** и **массивы** (`[Type]`).
#### 3. **Запросы (Query)**
Клиент отправляет **запрос**, сервер возвращает только запрошенные данные:
```graphQL
query {
    getUser(id: 1) {
        id
        name
    }
}
```

```json
{
  "data": {
    "getUser": {
      "id": "1",
      "name": "John Doe"
    }
  }
}
```
#### 4. **Мутации (Mutation)**
Позволяют изменять данные:
```graphQL
mutation {
    createUser(name: "Alice", age: 25) {
        id
        name
    }
}
```

Ответ сервера:
```json
{
  "data": {
    "createUser": {
      "id": "2",
      "name": "Alice"
    }
  }
}
```

#### 5. **Подписки (Subscription)**
Используются для получения **реального времени** (например, для чатов, уведомлений):
```graphQL
subscription {
    userCreated {
        id
        name
    }
}
```

### **Дополнительные возможности**
1. **Агрегация данных**  
    GraphQL может получать данные из **разных источников (БД, API, кеша и т.д.)** в одном запросе.
2. **Авторизация и аутентификация**  
    Можно интегрировать с **Spring Security** для защиты API.
3. **Code-first vs Schema-first**
    - **Schema-first**: сначала создаем схему (`.graphqls`), потом реализацию.
    - **Code-first**: используем аннотации Java (`@SchemaMapping`, `@QueryMapping`).
4. **GraphQL Federation & Microservices**  
    Позволяет объединять несколько GraphQL API в один слой, удобен для **микросервисной архитектуры**.

###  **GraphQL vs REST**

|**Функция**|**GraphQL**|**REST**|
|---|---|---|
|**Гибкость**|Клиент выбирает данные|Фиксированные ответы|
|**Эндпоинты**|1 `/graphql`|Много эндпоинтов|
|**Перфоманс**|Получает только нужные данные|Может возвращать лишние данные|
|**Оверхед**|Сложнее кэшировать|Проще кешировать|


**В spring boot просто все это использовать подключается стартер создаться контролер с аннотациями для graphQL**


---
Tags: #infrastructure #graphQL
Author: [[]]
Related: [[Инфраструктурными технологии для разработки на Java]]
URL: -- 