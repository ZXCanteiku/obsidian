## Transaction
aliases: 
	- "Transaction"

### Типы распространения транзакций (Transaction Propagation)
Spring поддерживает различные типы распространения транзакций:
- **`REQUIRED` (по умолчанию):**
    - Использует текущую транзакцию или создает новую, если текущая отсутствует.
- **`REQUIRES_NEW`:**
    - Всегда создает новую транзакцию, приостанавливая текущую.
- **`SUPPORTS`:**
    - Выполняется в существующей транзакции, если она есть. В противном случае — без транзакции.
- **`NOT_SUPPORTED`:**
    - Выполняется без транзакции. Приостанавливает текущую, если она существует.
- **`MANDATORY`:**
    - Требует существующей транзакции. Если её нет, выбрасывается исключение.
- **`NEVER`:**
    - Запрещает выполнение в транзакции. Если транзакция существует, выбрасывается исключение.
- **`NESTED`:**
    - Создает вложенную транзакцию, которая может быть откатана независимо от основной.

### Изоляция транзакций (Transaction Isolation)
Изоляция определяет, как данные одной транзакции видны другим. JPA/Hibernate поддерживают уровни изоляции, предоставляемые базой данных.
**Уровни изоляции:**
1. **`READ_UNCOMMITTED`**:
    - Транзакция может видеть изменения, еще не зафиксированные другой транзакцией.
    - Подвержена всем аномалиям (грязные чтения, неповторяющиеся чтения, фантомные чтения).
2. **`READ_COMMITTED`** (по умолчанию для большинства баз данных):
    - Видны только зафиксированные изменения.
    - Устраняет грязные чтения.
3. **`REPEATABLE_READ`**:
    - Гарантирует, что данные, прочитанные один раз, не изменятся до конца транзакции.
    - Устраняет грязные и неповторяющиеся чтения.
4. **`SERIALIZABLE`**:
    - Полная изоляция, все транзакции выполняются последовательно.
    - Устраняет все аномалии, но снижает производительность.

[[Уровни изоляций транзакции]]

### Откат транзакций
Hibernate и JPA выполняют откат транзакции при возникновении исключений.
**Типы исключений:**
- **`Checked Exceptions`** (проверяемые): Не вызывают откат автоматически. Необходимо явно указать это в настройках.
- **`Runtime Exceptions`** (непроверяемые): Автоматически вызывают откат транзакции.


---
Tags: #transaction
Author: [[]]
Related: [[JDBC, ORM, JPA and Hibernate]]
URL: [[]]