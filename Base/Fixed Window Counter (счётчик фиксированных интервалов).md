## Счетчик фиксированных интервалов
aliases: 
	- "Счетчик фиксированных интервалов"

---

# Алгоритм счетчика фиксированных интервалов

Алгоритм **счетчика фиксированных интервалов** работает следующим образом:

1. **Временной период** делится на **равные интервалы**.
2. Каждому интервалу назначается **счетчик**.
3. **Каждый запрос** увеличивает значение счетчика на 1.
4. Когда счетчик достигает **предельного лимита**, **новые запросы отклоняются** до начала следующего интервала.

## Пример работы
На **рис. 4.8** показан алгоритм, в котором:
- Интервал **равен 1 секунде**.
- Система допускает **не более 3 запросов в секунду**.
- Если в интервале поступает больше 3 запросов, **избыточные отклоняются**.

### Иллюстрация работы алгоритма

![[Pasted image 20250301202559.png]]

## Проблема всплесков трафика

Основная проблема этого алгоритма — **всплески трафика на границе временных интервалов**. Это может привести к превышению квоты запросов.

### Пример перегрузки системы

На **рис. 4.9**:
- **Лимит**: не более **5 запросов в минуту**.
- **Сброс квоты**: происходит ежеминутно.
- **Фактическое поведение**: между **2:00:00 и 2:01:00** поступает **5 запросов**, а между **2:01:00 и 2:02:00** — еще **5 запросов**.
- Однако **за одну минуту (между 2:00:30 и 2:01:30)** система приняла **10 запросов** – в **два раза больше** допустимого.

### Иллюстрация перегрузки

![[Pasted image 20250301202628.png]]
## Преимущества и недостатки

### Преимущества
- **Эффективное потребление памяти**.
- **Простая реализация** и понятность.
- **Сброс квоты запросов в конце интервала** удобен для ряда задач.
### Недостатки

- **Всплески трафика** на границе интервалов могут **привести к превышению квоты** запросов.

---

_Этот метод используется в ограничениях API и системах управления трафиком._

---
Tags:  #solution
Author: [[]]
Related: [[Rate limit]]
URL: -- 