## Keyset pagination
aliases: 
	- "Keyset pagination"

#### **Offset-пагинация**
- В Offset-пагинации используется смещение (offset) для указания, с какой строки начинать выборку данных.
- **SQL-пример:**
	```sql
	SELECT * FROM items ORDER BY id LIMIT 10 OFFSET 20;
	```
**Плюсы:**
1. Простая в реализации.
2. Хорошо работает для небольших объемов данных.
3. Подходит, если точное количество записей и произвольная навигация важны.
**Минусы:**
1. **Проблемы с производительностью:**
    - База данных должна вычислить и пропустить N строк, даже если они не будут возвращены.
    - Чем больше `OFFSET`, тем больше ресурсов потребляет запрос.
2. **Нестабильность данных:**
    - Если данные изменяются (вставка/удаление), порядок строк может измениться, что приводит к пропущенным или дублированным результатам.
#### **Keyset-пагинация**
- В Keyset-пагинации используется "якорная точка" (ключ) для определения начала следующей страницы данных. Вместо `OFFSET` запрос выбирает данные, "больше текущего ключа".
- **SQL-пример:**
	```sql
	SELECT * FROM items WHERE id > 100 ORDER BY id LIMIT 10;
	```
**Плюсы:**
1. **Высокая производительность:**
    - Запрос фокусируется только на релевантных данных без необходимости вычисления и пропуска строк.
    - Использует индексы, что делает запросы быстрыми.
2. **Стабильность данных:**
    - Даже при изменении данных (вставка/удаление) результаты остаются корректными.
**Минусы:**
1. Требует наличия упорядоченного уникального ключа (например, `id`).
2. Не подходит для произвольной навигации (например, перейти сразу на 10-ю страницу).
3. Сложнее реализовать, если фильтры или сложные сортировки.
---
Tags: #keyset
Author: [[]]
Related: [[JDBC, ORM, JPA and Hibernate]]
URL: [[]]