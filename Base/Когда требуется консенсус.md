## О чем эта заметка
aliases: 
	- ""

---

# Когда требуется консенсус

**Общее определение**

- Консенсус: несколько узлов должны выбрать **одно** значение (или одно решение) из набора возможных вариантов так, чтобы все с этим решением согласились, и оно стало необратимым.
- Нередко формулируется, что «узлы предлагают несколько значений, алгоритм выбирает одно». Это может быть имя нового лидера, «победитель» при ограничении уникальности и т. д.

**Классические примеры**

1. **Выбор лидера**. Нужно избежать «двух лидеров», ведь это ведёт к конфликтам и несогласованности.
2. **Уникальные ключи**. Когда двое пытаются одновременно занять одно имя пользователя, алгоритм должен выбрать, кто из них успел «первым».
3. **Атомарные транзакции** (затрагивающие несколько узлов). Нужно «зафиксировать всё или ничего» на всех узлах сразу.
4. **Общая (атомарная) последовательность сообщений**. Система хочет, чтобы каждое сообщение доставлялось во все узлы в одном и том же порядке.

**Почему часто пытаются избежать глобального консенсуса**

- Он замедляет систему: нужно синхронное ожидание кворума (или «голосования») даже при нормальной работе без сбоев.
- При сетевом разрыве часть узлов может не участвовать, и тогда система теряет доступность.
- Однако есть задачи (перечисленные выше), где «обойтись» без консенсуса сложно или рискованно.

---
Tags: #highLoad #develop #coherence  #consensus
Author: [[]]
Related: [[Согласованность и консенсус]]
URL: -- 