## Что такое перебалансировка секций
aliases: 
	- "перебалансировка секций"

---

### Перебалансировка секций

Со временем в базе данных происходят изменения, такие как:

- Увеличение числа запросов, требующих больше процессоров.
- Рост объема данных, требующих дополнительного места на жестких дисках и оперативной памяти.
- Сбои некоторых компьютеров, что приводит к перераспределению обязанностей среди узлов.

Для решения этих проблем требуется перемещение данных и перенаправление запросов, процесс, называемый **перебалансировкой (rebalancing)**.

#### Минимальные требования к перебалансировке:

- Нагрузка должна быть равномерно распределена по узлам.
- База данных должна продолжать принимать запросы во время перебалансировки.
- Перемещать необходимо лишь нужное количество данных для ускорения процесса.

#### Методики перебалансировки

Существует несколько способов распределения секций по узлам:

1. **[[Хеширование по модулю N]]** – не рекомендуется, так как при изменении количества узлов требуется перенос большинства ключей, что делает перебалансировку затратной.
    - Пример: ключ `hash(key) = 123456` будет располагаться на разных узлах при изменении их количества, что приведет к частым перемещениям данных.
2. **[[Фиксированное количество секций]]** – создаются больше секций, чем узлов, что позволяет перераспределять нагрузку более эффективно.
    - Пример: для кластера из 10 узлов можно создать 1000 секций, что минимизирует необходимость в переносе данных при добавлении или удалении узлов.
3. **[[Динамическое секционирование]]** – секции создаются и удаляются автоматически в зависимости от объема данных.
    - Пример: в HBase секция, превышающая 10 ГБ, делится на две, а при уменьшении объема данных секция может быть объединена с соседней.
4. **[[Секционирование пропорционально количеству узлов]]** – количество секций изменяется в зависимости от количества узлов, что позволяет поддерживать равномерное распределение нагрузки.
    - Пример: в [[Cassandra]] при добавлении нового узла происходит перераспределение секций, что позволяет равномерно распределить нагрузку.
5. **[[Автоматическая или ручная перебалансировка]]** – количество секций изменяется в зависимости от количества узлов, что позволяет поддерживать равномерное распределение нагрузки.
    - Пример: в [[Cassandra]] при добавлении нового узла происходит перераспределение секций, что позволяет равномерно распределить нагрузку.

#### Вывод

Правильный подход к перебалансировке включает создание достаточного количества секций для уменьшения затрат на перемещение данных при изменениях в кластере и использование динамического секционирования для адаптации к изменениям в объеме данных.


---
Tags: #highLoad #develop #sectioning
Author: [[]]
Related: [[Секционирование]]
URL: -- 