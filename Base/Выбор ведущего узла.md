## Выбор ведущего узла
aliases: 
	- "Выбор ведущего узла"

---

# Выбор ведущего узла

**Связь с консенсусом**

- Если базу данных (или сервис) хочется реплицировать с одним ведущем узлом, необходимо понять, **кто** сейчас ведущий. Это консенсусная задача.
- Нельзя просто «верить» одному узлу: при сбое сети он может считать себя ведущем, а на другой стороне тоже есть «ведущий». Раздвоение интеллекта.

**Подходы**

1. **Ждать восстановления** старого лидера. Система не принимает записи, пока лидер не «починится». Это простой вариант, но может надолго «подвиснуть» систему.
2. **Вручную переключить**. Администратор видит, что узел A упал, и вручную назначает узел B лидером. Для некоторых систем (с классическими реляционными СУБД) это приемлемо, но медленно.
3. **Алгоритм автоматического выбора**. Алгоритмы наподобие Paxos, Raft, Zab ([[Консенсусные протоколы]]) гарантируют, что в каждый момент будет (не более чем) один действующий лидер. При сбое старого лидера начинается «голосование» — узлы быстро сходятся на новом.

**Цена автоматизации**

- Надо иметь «кворум» — большинство узлов, чтобы принять новое решение. Если сеть разделилась пополам, только одна из «половин» сможет выбрать лидера (другая останется без прав на записи).
- Если задержки высокие, система может слишком часто «перевыбирать» лидера, снижая свою производительность.

---
Tags: #highLoad #develop #coherence  #consensus
Author: [[]]
Related: [[Консенсусные протоколы]]
URL: -- 